#simplified makefile for Thumbnail for Linux
#creates ./thumbnail.exe

# ----- jpeglib supprot -------

JPEG_TGZ = jpegsrc.v6b.tar.gz
DIRJPEG1 = ./jpegsrc
DIRJPEG2 = $(DIRJPEG1)/jpeg-6b
DIRJPEG3 = $(DIRJPEG1)/ralf_patch
LIBJPEG  = $(DIRJPEG2)/libjpeg.a

INCDIR   = -I. -I$(DIRJPEG2)

# -----------------------------

all: $(LIBJPEG)
	make -C $(DIRJPEG2) libjpeg.a


$(LIBJPEG):
	if [ ! -f $(DIRJPEG1)/$(JPEG_TGZ) ]; \
	then \
		cd $(DIRJPEG1) ; \
		wget ftp://ftp.uu.net/graphics/jpeg/jpegsrc.v6b.tar.gz ; \
	fi
	if [ ! -d $(DIRJPEG2) ]; \
	then \
		( cd $(DIRJPEG1) ; tar xvzf $(JPEG_TGZ) ) ; \
		cp -v $(DIRJPEG3)/*.h $(DIRJPEG3)/*.ds* $(DIRJPEG2)/ ; \
	fi
	if [ ! -f $(LIBJPEG) ]; \
	then \
		cd $(DIRJPEG2) ; \
		./configure ; \
	fi

# -----------------------------

clean:
	if [ -d $(DIRJPEG2) ]; then make -C $(DIRJPEG2) clean ; fi;

# -----------------------------

#
# $Log$
# Revision 1.2  2003/08/16 22:04:02  ralfoide
# Always compile its own libjpeg.
#
# Revision 1.1  2003/07/16 07:04:59  ralfoide
# Separating with-video/no-video makefiles
#
#
